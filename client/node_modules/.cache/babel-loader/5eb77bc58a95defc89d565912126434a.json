{"ast":null,"code":"var _jsxFileName = \"/Users/simmone/brainstation/simmone-kelly-brainflix-app/client/src/components/Home-Page/HomePage.js\";\nimport React, { Component } from 'react';\nimport Video from '../2-Video/Video';\nimport BelowVideoSection from '../3-Below-Video/BelowVideoSection';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet apiKey = '2c4911e9-9ba1-4e47-9dc6-1054b805d4c7';\nexport default class HomePage extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      VideoData: [],\n      videoId: null,\n      videoInfo: {\n        comments: []\n      },\n      newComment: \"\"\n    };\n\n    this.getNewId = id => {\n      this.setState({\n        videoId: id\n      });\n    };\n\n    this.handleCommentInputChange = text => {\n      this.setState({\n        newComment: text\n      });\n    };\n\n    this.addComment = e => {\n      e.preventDefault();\n      axios.post('http://localhost:8080/videos/' + this.state.videoId + '/comments?api_key=' + apiKey, {\n        comment: this.state.newComment\n      }).then(data => {\n        this.setState({\n          videoInfo: data.data\n        });\n      }); // this.commentsform.reset();\n    };\n\n    this.deleteComment = (commentId, videoId) => {\n      axios.delete('http://localhost:8080/videos/' + videoId + '/comments/' + commentId + '?api_key=' + apiKey).then(data => {\n        this.setState({\n          VideoData: data.data //needs to push refresh, cant refresh with if statement\n\n        });\n      });\n    };\n  }\n\n  //sets initial state\n  componentDidMount() {\n    this.fetchVideoList();\n  } // gets full video list\n\n\n  fetchVideoList() {\n    axios.get('http://localhost:8080/videos?api_key=' + apiKey).then(results => {\n      let videoData = results.data;\n      this.setState({\n        VideoData: videoData,\n        videoId: videoData[0].id\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  } // onclick event listener to get clicked element id\n\n\n  // calls to get video info from axios\n  fetchVideoInfo(id) {\n    axios.get('http://localhost:8080/videos/' + id + '?api_key=' + apiKey).then(results => {\n      const videoInfo = results.data;\n      this.setState({\n        videoInfo: videoInfo\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    console.log('updated'); //|| (this.state.videoInfo !== prevState.videoInfo)\n\n    console.log(this.state.videoInfo.comments); //checks if current state matches previous state to fetch video info\n\n    if (this.state.videoId !== prevState.videoId || this.state.videoInfo.comments.length !== prevState.videoInfo.comments.length) {\n      console.log('fetched video info');\n      this.fetchVideoInfo(this.state.videoId);\n    } //checks to see if id is available\n\n\n    if (this.props.match.params.id) {\n      console.log('is id available');\n      const videoId = this.props.match.params.id; //checks to see if id param matches previous state id to then set state\n\n      if (prevState.videoId !== videoId) {\n        console.log('set new video id');\n        this.setState({\n          videoId: videoId\n        });\n      }\n    } else if (!this.props.match.params.id && prevProps.match.params.id) {\n      this.setState({\n        videoId: this.state.VideoData[0].id\n      });\n    }\n  } //manages comment state change\n\n\n  render() {\n    const currentVideoIndex = this.state.VideoData.findIndex(element => element.id === this.state.videoId);\n\n    if (!this.state.videoId) {\n      return null;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Video, {\n        currentVideo: this.state.VideoData[currentVideoIndex]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(BelowVideoSection, {\n        currentVideo: this.state.VideoData[currentVideoIndex],\n        getNewId: this.getNewId,\n        videosList: this.state.VideoData,\n        routerProps: this.props,\n        videoInfo: this.state.videoInfo,\n        commentHandler: this.addComment,\n        deleteComment: this.deleteComment,\n        handleCommentInputChange: this.handleCommentInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/simmone/brainstation/simmone-kelly-brainflix-app/client/src/components/Home-Page/HomePage.js"],"names":["React","Component","Video","BelowVideoSection","axios","apiKey","HomePage","state","VideoData","videoId","videoInfo","comments","newComment","getNewId","id","setState","handleCommentInputChange","text","addComment","e","preventDefault","post","comment","then","data","deleteComment","commentId","delete","componentDidMount","fetchVideoList","get","results","videoData","catch","error","console","log","fetchVideoInfo","componentDidUpdate","prevProps","prevState","length","props","match","params","render","currentVideoIndex","findIndex","element"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Video from '../2-Video/Video';\nimport BelowVideoSection from '../3-Below-Video/BelowVideoSection';\nimport axios from 'axios';\nlet apiKey = '2c4911e9-9ba1-4e47-9dc6-1054b805d4c7'\n\n\nexport default class HomePage extends Component {\n\n    state = {\n        VideoData: [],\n        videoId: null,\n        videoInfo: {\n            comments: []\n        },\n        newComment: \"\",\n    };\n\n    //sets initial state\n    componentDidMount() {\n        this.fetchVideoList();\n    }\n\n    // gets full video list\n    fetchVideoList() {\n        axios.get('http://localhost:8080/videos?api_key=' + apiKey)\n        .then(results => {\n            let videoData = results.data;\n            this.setState({\n                VideoData: videoData,\n                videoId: videoData[0].id,\n            })\n        })\n        .catch(error => {\n            console.log(error)\n        });\n    }\n  \n    // onclick event listener to get clicked element id\n    getNewId = (id) => {\n        this.setState({videoId: id});\n    }\n\n    // calls to get video info from axios\n    fetchVideoInfo(id) {\n        axios.get('http://localhost:8080/videos/' + id + '?api_key=' + apiKey)\n        .then(results => {\n            const videoInfo = results.data;\n            this.setState({\n                videoInfo: videoInfo,\n            })\n        })\n        .catch(error => {\n            console.log(error)\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        console.log('updated')\n        //|| (this.state.videoInfo !== prevState.videoInfo)\n\n        console.log(this.state.videoInfo.comments)\n        \n        //checks if current state matches previous state to fetch video info\n        if ((this.state.videoId !== prevState.videoId) || (this.state.videoInfo.comments.length !== prevState.videoInfo.comments.length)) {\n            console.log('fetched video info')\n            this.fetchVideoInfo(this.state.videoId);\n        }\n        \n        //checks to see if id is available\n        if(this.props.match.params.id) {\n            console.log('is id available')\n            const videoId = this.props.match.params.id;\n            \n            //checks to see if id param matches previous state id to then set state\n            if (prevState.videoId !== videoId) {\n                console.log('set new video id')\n                this.setState({videoId: videoId})\n            }\n        } else if (!this.props.match.params.id && prevProps.match.params.id){\n            this.setState({\n                videoId: this.state.VideoData[0].id,\n            })\n        }\n        \n    }\n\n    //manages comment state change\n    handleCommentInputChange = (text) => {\n        this.setState({\n            newComment: text,\n        })\n    }\n\n    //comment form submisison\n    addComment = (e) => {\n        e.preventDefault();\n        \n        axios.post('http://localhost:8080/videos/' + this.state.videoId + '/comments?api_key=' + apiKey, {\n            comment: this.state.newComment,\n          })\n        .then(data => {\n          this.setState({\n            videoInfo: data.data,\n          })\n        });\n        // this.commentsform.reset();\n    };\n\n    deleteComment = (commentId, videoId) => {\n\n        axios.delete('http://localhost:8080/videos/' + videoId + '/comments/' + commentId + '?api_key=' + apiKey)\n        .then(data => {\n            this.setState({\n                VideoData: data.data, //needs to push refresh, cant refresh with if statement\n            })\n        });\n    };\n\n\n    render () {\n\n    const currentVideoIndex = this.state.VideoData.findIndex(element => element.id === this.state.videoId);\n\n    if (!this.state.videoId) {\n        return null\n    }\n\n    return (\n        <div>\n            <Video currentVideo={this.state.VideoData[currentVideoIndex]} />\n            <BelowVideoSection\n                currentVideo={this.state.VideoData[currentVideoIndex]}\n                getNewId={this.getNewId}\n                videosList={this.state.VideoData}\n                routerProps={this.props}\n                videoInfo={this.state.videoInfo}\n                commentHandler={this.addComment}\n                deleteComment={this.deleteComment}\n                handleCommentInputChange={this.handleCommentInputChange} />\n        </div>\n    )}\n}\n\n"]},"metadata":{},"sourceType":"module"}